name: YouTube
description: YouTube 
author: SubTek
credit: Maasea

map_locals:
  - match: ^https?:\/\/[\w-]+\.googlevideo\.com\/initplayback.+&oad
    status_code: 200
    body: '{}'
map_locals:
  - match: ^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad
    status_code: 200
    body: '{}'
map_locals:
  - match: (^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+)
    status_code: 302
    body: '{}'
map_locals:
  - match: ^https?:\/\/(www|s)\.youtube\.com\/api\/stats\/ads
    status_code: 200
    body: '{}'	
map_locals:
  - match: ^https?:\/\/(www|s)\.youtube\.com\/(pagead|ptracking)
    status_code: 200
    body: '{}'
map_locals:
  - match: ^https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?adcontext
    status_code: 200
    body: '{}'

scriptings:
  - http_response:
      name: YouTube
      match: ^https:\/\/youtubei\.googleapis\.com\/youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting|get_watch)
      script_url: https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/dist/youtube.response.preview.js
      timeout: 30
      body_required: true
      binary_body: true

mitm:
  hostnames:
    - '*.googlevideo.com'
    - youtubei.googleapis.com
    - redirector*.googlevideo.com
    - *.googlevideo.com
    - www.youtube.com
    - s.youtube.com
    - youtubei.googleapis.com
    - youtubei.googleapis.com
